--- fs/eventpoll.c	2013-01-04 04:01:38.000000000 -0800
+++ fs/eventpoll.c	2013-03-19 04:01:01.000000000 -0700
@@ -835,31 +449,18 @@
 
 	init_poll_funcptr(&pt, NULL);
 
-	/*
-	 * Set the new event interest mask before calling f_op->poll();
-	 * otherwise we might miss an event that happens between the
-	 * f_op->poll() call and the new event set registering.
-	 */
 	epi->event.events = event->events;
 	pt._key = event->events;
-	epi->event.data = event->data; /* protected by mtx */
+	epi->event.data = event->data; 
 
-	/*
-	 * Get current event bits. We can safely use the file* here because
-	 * its usage count has been increased by the caller of this function.
-	 */
 	revents = epi->ffd.file->f_op->poll(epi->ffd.file, &pt);
 
-	/*
-	 * If the item is "hot" and it is not registered inside the ready
-	 * list, push it inside.
-	 */
 	if (revents & event->events) {
 		spin_lock_irq(&ep->lock);
 		if (!ep_is_linked(&epi->rdllink)) {
 			list_add_tail(&epi->rdllink, &ep->rdllist);
 
-			/* Notify waiting tasks that events are available */
+			
 			if (waitqueue_active(&ep->wq))
 				wake_up_locked(&ep->wq);
 			if (waitqueue_active(&ep->poll_wait))
